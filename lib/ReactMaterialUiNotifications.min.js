"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _objectWithoutProperties(t,e){var i={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=t[o]);return i}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_propTypes3=require("material-ui/utils/propTypes"),_propTypes4=_interopRequireDefault(_propTypes3),_reactTransitionGroup=require("react-transition-group"),_Paper=require("material-ui/Paper"),_Paper2=_interopRequireDefault(_Paper),_List=require("material-ui/List"),_Divider=require("material-ui/Divider"),_Divider2=_interopRequireDefault(_Divider),_IconButton=require("material-ui/IconButton"),_IconButton2=_interopRequireDefault(_IconButton),_Avatar=require("material-ui/Avatar"),_Avatar2=_interopRequireDefault(_Avatar),_close=require("material-ui/svg-icons/navigation/close"),_close2=_interopRequireDefault(_close),notifications=[],count=0,maxNotifications=void 0,ReactMaterialUiNotifications=function(t){function e(){var t,i,o,r;_classCallCheck(this,e);for(var n=arguments.length,a=Array(n),p=0;p<n;p++)a[p]=arguments[p];return i=o=_possibleConstructorReturn(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),o.getStyle=function(){return Object.assign({position:"fixed",zIndex:1,minWidth:325},o.props.rootStyle)},o.getProps=function(t){var e=o.props,i=(e.children,e.rootStyle,e.maxNotifications,_objectWithoutProperties(e,["children","rootStyle","maxNotifications"]));return Object.assign(t,i)},r=i,_possibleConstructorReturn(o,r)}return _inherits(e,_react.Component),_createClass(e,[{key:"componentWillMount",value:function(){notifications=[],maxNotifications=this.props.maxNotifications}},{key:"removeNotification",value:function(t){notifications.splice(t,1),this.forceUpdate()}},{key:"render",value:function(){var t=this;return _react2.default.createElement("div",{style:this.getStyle()},notifications.map(function(e,i){return _react2.default.createElement(Notification,_extends({removeNotification:function(){t.removeNotification(i)},open:!0,key:e.count},t.getProps(e)))}))}}]),e}();ReactMaterialUiNotifications.muiPropTypes={desktop:_propTypes2.default.bool,maxNotifications:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),rootStyle:_propTypes2.default.object},ReactMaterialUiNotifications.defaultProps={maxNotifications:1/0,rootStyle:{bottom:20,right:25}},ReactMaterialUiNotifications.contextTypes={muiTheme:_propTypes2.default.object.isRequired},ReactMaterialUiNotifications.showNotification=function(t){var e=notifications;t.open=!0,t.count=count,e.push(t),e=e.filter(ReactMaterialUiNotifications.filterOpen),notifications=ReactMaterialUiNotifications.shuffleNotifications(e),count++},ReactMaterialUiNotifications.filterOpen=function(t){return t.open},ReactMaterialUiNotifications.shuffleNotifications=function(t){if(t.length>maxNotifications)for(var e in t)if(!("object"!==_typeof(t[e])||t[e].hasOwnProperty("priority")&&t[e].priority)&&(t.splice(e,1),t.length===maxNotifications))break;return t.sort(function(t,e){var i=t.priority,o=e.priority;return!i&&o?1:i&&!o?-1:0}),t},exports.default=ReactMaterialUiNotifications;var Notification=function(t){function e(){var t,i,o,r;_classCallCheck(this,e);for(var n=arguments.length,a=Array(n),p=0;p<n;p++)a[p]=arguments[p];return i=o=_possibleConstructorReturn(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),o.getStyle=function(){return Object.assign({display:"block",textAlign:"left",borderRadius:3,margin:"12px auto"},o.props.style)},o.onCloseNotification=function(){o.props.removeNotification()},o.getNotificationIcon=function(){var t=void 0;if(o.props.icon)if(o.props.personalised){var e={position:"absolute",padding:4,right:-6,bottom:-4,borderRadius:"50%",backgroundColor:o.props.iconBadgeColor,justifyContent:"center",alignItems:"center",display:"flex"},i=(0,_react.cloneElement)(o.props.icon,{color:o.props.iconFillColor,style:{width:12,height:12}});t=_react2.default.createElement("div",{style:{top:4,margin:0,left:8,width:"auto",height:"auto"}},_react2.default.createElement(_Avatar2.default,{src:o.props.avatar,size:44,style:{textAlign:"center"}}),_react2.default.createElement("div",{style:e},i))}else{var r={height:32,width:32,top:4,padding:6,margin:0,left:8,borderRadius:"50%",backgroundColor:o.props.iconBadgeColor,justifyContent:"center",alignItems:"center",display:"flex"},n=(0,_react.cloneElement)(o.props.icon,{color:o.props.iconFillColor,style:{margin:0}});t=_react2.default.createElement("div",{style:r},n)}return t},r=i,_possibleConstructorReturn(o,r)}return _inherits(e,_react.Component),_createClass(e,[{key:"componentWillMount",value:function(){var t=this;this.props.autoHide&&(this.autoHideTimeout=setTimeout(function(){t.props.removeNotification()},this.props.autoHide))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.autoHideTimeout)}},{key:"render",value:function(){var t=this,e={padding:this.props.icon?"8px 8px 0 72px":"8px 8px 0 12px"},i={position:"absolute",right:this.props.desktop?42:8,fontSize:12,top:14},o=void 0,r=void 0,n=void 0,a=void 0,p=void 0;return this.props.additionalText&&(o=_react2.default.createElement("div",{style:{marginTop:8,marginBottom:8}},this.props.additionalText)),r=this.props.overflowText?_react2.default.createElement("span",null,_react2.default.createElement(_Divider2.default,{inset:!0}),_react2.default.createElement("div",{style:{padding:"12px 0 12px 72px"}},this.props.overflowText)):_react2.default.createElement("span",null),n=this.props.overflowContent?_react2.default.createElement("span",null,_react2.default.createElement(_Divider2.default,{inset:!0}),_react2.default.createElement("div",{style:{paddingLeft:72}},this.props.overflowContent)):_react2.default.createElement("span",null),this.props.desktop&&(a=_react2.default.createElement(_IconButton2.default,{style:{width:36,height:36,top:-3,right:4,padding:6},iconStyle:{height:18,width:18},onClick:this.onCloseNotification},_react2.default.createElement(_close2.default,null))),this.props.timestamp&&(p=_react2.default.createElement("div",{style:i},this.props.timestamp)),_react2.default.createElement(_reactTransitionGroup.CSSTransitionGroup,{transitionName:this.props.transitionName?this.props.transitionName:"",transitionAppear:!!this.props.transitionAppear&&this.props.transitionAppear,transitionEnter:!!this.props.transitionEnter&&this.props.transitionEnter,transitionLeave:!!this.props.transitionLeave&&this.props.transitionLeave,transitionAppearTimeout:this.props.transitionAppearTimeout?this.props.transitionAppearTimeout:0,transitionEnterTimeout:this.props.transitionEnterTimeout?this.props.transitionEnterTimeout:0,transitionLeaveTimeout:this.props.transitionLeaveTimeout?this.props.transitionLeaveTimeout:0},_react2.default.createElement(_Paper2.default,{style:this.getStyle(),zDepth:this.props.zDepth,transitionEnabled:!1},_react2.default.createElement(_List.List,{style:{position:"relative"}},_react2.default.createElement(_List.ListItem,{primaryText:this.props.title,secondaryText:o,secondaryTextLines:this.props.additionalLines,leftIcon:this.getNotificationIcon(),insetChildren:!0,rightIconButton:a,innerDivStyle:e,disabled:!this.props.onClick,onClick:function(){t.props.onClick&&(t.props.onClick(),t.props.removeNotification())}}),p),n,r))}}]),e}();Notification.muiPropTypes={additionalText:_propTypes2.default.string,additionalLines:_propTypes2.default.number,autoHide:_propTypes2.default.number,avatar:_propTypes2.default.string,icon:_propTypes2.default.element,iconBadgeColor:_propTypes2.default.string,iconFillColor:_propTypes2.default.string,onClick:_propTypes2.default.func,open:_propTypes2.default.bool,overflowText:_propTypes2.default.string,overflowContent:_propTypes2.default.element,personalised:_propTypes2.default.bool,priority:_propTypes2.default.bool,removeNotification:_propTypes2.default.func,style:_propTypes2.default.object,title:_propTypes2.default.string,timestamp:_propTypes2.default.string,zDepth:_propTypes4.default.zDepth},Notification.defaultProps={iconFillColor:"#fff",zDepth:1},Notification.contextTypes={muiTheme:_propTypes2.default.object.isRequired};